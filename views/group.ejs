<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ú–æ—è –∫–æ–º–∞–Ω–¥–∞</title>
<style>
body {
  margin: 0;
  font-family: "Inter", "Segoe UI", Roboto, sans-serif;
  background: #101222;
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  overflow: hidden;
  position: relative;
}

.container {
  background: rgba(20, 20, 40, 0.95);
  padding: 30px;
  border-radius: 16px;
  box-shadow: 0 0 32px rgba(0,224,255,0.4);
  width: 90%;
  max-width: 420px;
  text-align: center;
  position: relative;
  z-index: 10; /* —á—Ç–æ–±—ã –±—ã—Ç—å –≤—ã—à–µ –ø–ª–∞–≤–∞—é—â–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ */
}

h1, h2 {
  margin-bottom: 16px;
  color: #00e0ff;
}

.ref-block {
  background: rgba(0,0,0,0.3);
  border: 1px solid rgba(255,255,255,0.2);
  padding: 15px;
  border-radius: 12px;
  margin-bottom: 20px;
}
.ref-block code {
  display: block;
  margin: 8px 0;
  background: rgba(0,0,0,0.4);
  padding: 8px;
  border-radius: 8px;
  word-break: break-all;
  color: #00e0ff;
}

button {
  padding: 10px 20px;
  border: none;
  border-radius: 12px;
  background: linear-gradient(135deg, #00e0ff, #6a5acd);
  color: #fff;
  cursor: pointer;
  font-weight: 600;
  transition: 0.3s;
  box-shadow: 0 0 20px rgba(0,224,255,0.4);
}
button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 25px rgba(0,224,255,0.6);
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
  font-size: 0.9em;
}
th, td {
  padding: 10px;
  border-bottom: 1px solid rgba(255,255,255,0.2);
}
th { color: #00e0ff; }
tr:hover { background: rgba(255,255,255,0.05); }

#notification {
  position: absolute;
  top: -60px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.8);
  padding: 12px 20px;
  border-radius: 12px;
  font-weight: 600;
  display: none;
  color: #fff;
  box-shadow: 0 0 20px rgba(0,224,255,0.5);
}
#notification.success { background: linear-gradient(135deg, #00e0ff, #6a5acd); }
#notification.error { background: linear-gradient(135deg, #ff4c4c, #ff0000); }

nav {
  margin-top: 25px;
}
nav a {
  display: inline-block;
  width: 100%;
  max-width: 250px;
  padding: 12px 0;
  background: linear-gradient(135deg, #00e0ff, #6a5acd);
  color: white;
  text-decoration: none;
  border-radius: 12px;
  font-weight: 600;
  transition: 0.3s;
  box-shadow: 0 0 20px rgba(0,224,255,0.4);
}
nav a:hover {
  transform: scale(1.05);
  box-shadow: 0 0 25px rgba(0,224,255,0.6);
}

/* –ü–ª–∞–≤–∞—é—â–∏–µ üë• */
.dollar { 
  position: absolute; 
  font-size: 18px; 
  color: #00e0ff; /* –æ–¥–Ω–æ—Ç–æ–Ω–Ω—ã–π —Å–∏–ª—É—ç—Ç */
  user-select: none; 
  pointer-events: none;
  z-index: 1;
}
</style>
</head>
<body>

<div class="container">
  <div id="notification"></div>
  <h1>–ú–æ—è –∫–æ–º–∞–Ω–¥–∞</h1>

  <div class="ref-block">
    <p><strong>–í–∞—à —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥:</strong> <%= currentUser.referralCode %></p>
    <p><strong>–°—Å—ã–ª–∫–∞ –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π:</strong></p>
    <code><%= request.protocol + '://' + request.get('host') + '/register?ref=' + currentUser.referralCode %></code>
    <button onclick="copyLink()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
  </div>

  <h2>–ü—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>

  <% if (team.length === 0) { %>
    <p>–ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è –ø–æ –≤–∞—à–µ–π —Å—Å—ã–ª–∫–µ</p>
  <% } else { %>
    <table>
      <thead>
        <tr>
          <th>–ò–º—è</th>
          <th>–ü–æ–ø–æ–ª–Ω–µ–Ω–æ ($)</th>
        </tr>
      </thead>
      <tbody>
        <% team.forEach(member => { %>
          <tr>
            <td><%= member.name %></td>
            <td><%= member.balance.toFixed(2) %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } %>

  <nav>
    <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
  </nav>
</div>

<script>
const notification = document.getElementById('notification');
function showNotification(message, type="success") {
  notification.textContent = message;
  notification.className = '';
  notification.classList.add(type);
  notification.style.display = 'block';
  setTimeout(() => notification.style.display = 'none', 3000);
}
function copyLink() {
  const link = "<%= request.protocol + '://' + request.get('host') + '/register?ref=' + currentUser.referralCode %>";
  navigator.clipboard.writeText(link)
    .then(() => showNotification('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!', 'success'))
    .catch(() => showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏', 'error'));
}

/* üí∏ –ü–ª–∞–≤–∞—é—â–∏–µ üë• —Å –ø–∞—Ä–∞–ª–ª–∞–∫—Å–æ–º, –∫–æ–ª–µ–±–∞–Ω–∏–µ–º –∏ –≤—Ä–∞—â–µ–Ω–∏–µ–º */
const layers = [
  { speed: 4, size: [18,24], opacity: [0.4,0.7], sway: 15 },
  { speed: 6, size: [14,20], opacity: [0.3,0.6], sway: 10 },
  { speed: 8, size: [10,16], opacity: [0.2,0.5], sway: 6 }
];

function spawnDollar() {
  const layer = layers[Math.floor(Math.random()*layers.length)];
  const dollar = document.createElement("div");
  dollar.classList.add("dollar");
  dollar.textContent = "üë•";
  dollar.style.left = Math.random()*100 + "vw";
  dollar.style.top = Math.random()*100 + "vh"; // –ø–æ –≤—Å–µ–π –≤—ã—Å–æ—Ç–µ
  dollar.style.fontSize = (Math.random()*(layer.size[1]-layer.size[0]) + layer.size[0]) + "px";
  dollar.style.opacity = Math.random()*(layer.opacity[1]-layer.opacity[0]) + layer.opacity[0];
  dollar.style.animationDuration = layer.speed + "s";

  const startRotation = Math.random()*360;
  let rotationSpeed = (Math.random()*30 + 15) * (Math.random()<0.5?-1:1);
  let start = Date.now();

  function animateDollar() {
    const elapsed = (Date.now()-start)/1000;
    const offsetX = Math.sin(elapsed * 2*Math.PI/layer.speed) * layer.sway;
    const rotation = startRotation + elapsed*rotationSpeed;
    dollar.style.transform = `translateX(${offsetX}px) rotate(${rotation}deg)`;
    requestAnimationFrame(animateDollar);
  }
  animateDollar();

  document.body.appendChild(dollar);
  setTimeout(() => dollar.remove(), layer.speed*1000 + 1000);
}

setInterval(spawnDollar, 500);
</script>

</body>
</html>
