<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Личный кабинет</title>
<link rel="stylesheet" href="/style.css">
<style>
    body {
        margin: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: #0f0f1a;
        color: #fff;
        overflow-x: hidden;
    }

    /* --- Кнопка-гамбургер --- */
    #menuToggle {
        position: fixed;
        top: 15px;
        left: 15px;
        width: 50px;
        height: 50px;
        background: #162447;
        border: none;
        border-radius: 8px;
        color: #00ffea;
        font-size: 1.5em;
        cursor: pointer;
        z-index: 2000;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 0 10px rgba(0,255,234,0.5);
        transition: background 0.3s;
    }
    #menuToggle:hover {
        background: #1f4068;
    }

    /* --- Боковая панель --- */
    aside.sidebar {
        position: fixed;
        top: 0;
        left: -180px; /* скрыта изначально */
        width: 180px;
        height: 100vh;
        background: linear-gradient(180deg, #1a1a2e, #162447);
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 70px;
        box-shadow: 2px 0 8px rgba(0,0,0,0.5);
        transition: left 0.3s ease;
        z-index: 1500;
    }

    aside.sidebar.open {
        left: 0;
    }

    aside.sidebar a {
        width: 80%;
        text-align: center;
        margin: 15px 0;
        padding: 12px 0;
        border-radius: 8px;
        text-decoration: none;
        color: #00ffea;
        font-weight: bold;
        background: #1f4068;
        transition: all 0.3s;
    }

    aside.sidebar a:hover {
        background: #e43f5a;
        transform: scale(1.05);
        box-shadow: 0 0 10px #e43f5a;
    }

    /* --- Основной контент --- */
    main.content {
        padding: 40px;
        transition: margin-left 0.3s ease;
        margin-left: 0;
    }
    main.content.shifted {
        margin-left: 180px;
    }

    .balance {
        font-size: 1.5em;
        margin-bottom: 20px;
        color: #00ffea;
    }

    /* --- Нижняя навигация --- */
    nav.fixed-footer {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 15px;
        padding: 15px 0;
        background: rgba(30,30,50,0.9);
        backdrop-filter: blur(6px);
    }

    nav.fixed-footer a {
        flex: 1;
        max-width: 150px;
        text-align: center;
        padding: 12px 0;
        background: #162447;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        color: #00ffea;
        transition: all 0.3s;
    }
    nav.fixed-footer a:hover {
        background: #e43f5a;
        color: #fff;
        transform: scale(1.05);
    }
</style>
</head>
<body>

<!-- Кнопка-гамбургер -->
<button id="menuToggle">&#9776;</button>

<!-- Боковая панель -->
<aside class="sidebar" id="sidebar">
    <a href="/logout">Выйти</a>
    <a href="/support">Служба поддержки</a>
    <a href="/settings">Настройки</a>
</aside>

<!-- Основной контент -->
<main class="content" id="mainContent">
    <% if (currentUser) { %>
        <p class="balance">Баланс: $<%= currentUser.balance.toFixed(2) %></p>
        <p>Нажмите кнопку START внизу для запуска депозита.</p>
    <% } %>
</main>

<!-- Нижняя футуристическая навигация -->
<nav class="fixed-footer">
    <a href="/group">Моя группа</a>
    <a id="depositBtn">START</a>
    <a href="/history">История</a>
</nav>

<script>
    const menuToggle = document.getElementById('menuToggle');
    const sidebar = document.getElementById('sidebar');
    const mainContent = document.getElementById('mainContent');

    menuToggle.addEventListener('click', () => {
        sidebar.classList.toggle('open');
        mainContent.classList.toggle('shifted');
    });// Кнопка START
    const depositBtn = document.getElementById('depositBtn');
    depositBtn.addEventListener('click', async () => {
        try {
            const res = await fetch('/start-deposit', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ amount: 100 })
            });
            if (res.redirected) window.location.href = res.url;
        } catch (err) {
            alert('Ошибка сервера');
            console.error(err);
        }
    });
</script>

</body>
</html>